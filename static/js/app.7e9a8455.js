(function(){"use strict";var e={9380:function(e,t,n){var o=n(144),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s={name:"App"},a=s,l=n(3736),c=(0,l.Z)(a,r,i,!1,null,null,null),u=c.exports,d=n(5205);(0,d.z)("/good-mad-library/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered on /good-mad-library/service-worker.js")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration: /good-mad-library/",e)}});var p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"intro"},[n("div",{staticClass:"px-4 container mx-auto space-y-6"},[e._m(0),e._m(1),n("div",[e.url?e._e():n("div",{staticClass:"grid place-items-center p-6"},[n("spring-spinner",{attrs:{"animation-duration":3e3,size:40,color:"#235c4d"}})],1),e.url?n("button",{staticClass:"bg-transparent font-semibold py-2 px-4 border-2 rounded",on:{click:function(t){return e.goToWeb()}}},[e._v(" Pincha aqui y comprueba ")]):e._e()]),n("p",{staticClass:"text-xl mt-4 max-w-md mx-auto text-gray-400"},[e._v(" Recuerda que si es la primera vez que entras con este dispositivo, vas a tener que vincular tu cuenta de Goodreads cuando pinches ☝️ ")])])])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",{staticClass:"text-3xl font-extrabold sm:text-4xl"},[n("span",{staticClass:"block"},[e._v(" ¡Bienvenida! 👋 ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",[n("span",{staticClass:"text-3xl font-bold sm:text-3xl"},[e._v(" ¿Quieres ver si tus libros pendientes de Goodreads "),n("br"),e._v(" están en la biblioteca de Madrid? ")])])}],h=(n(7658),n(9669)),m=n.n(h),b=n(9397),g={name:"Intro",components:{SpringSpinner:b.Rs},data(){return{url:"",loadingBooks:!1,userName:""}},mounted(){m().get("init_oauth").then((e=>{this.url=e.data.oAuthUrl})).catch((e=>{console.log(e),this.$router.push({path:"/error"})}))},methods:{goToWeb(){window.location.href=this.url},getGoodReadsData(){m().get(this.link).then((e=>{this.loadingBooks=!0,this.userName=e.user.name})).catch((e=>{console.log(e),this.$router.push({path:"/error"})}))}}},v=g,_=(0,l.Z)(v,p,f,!1,null,"67b69b04",null),x=_.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userdata"},[n("fulfilling-square-spinner",{attrs:{"animation-duration":1e3,size:100,color:"#235c4d"}})],1)},y=[],C={name:"Userdata",components:{FulfillingSquareSpinner:b.dF},data(){return{userData:void 0}},watch:{userData:function(){console.log(JSON.stringify(this.userData)),this.userData.id&&this.$router.push({path:`/books/${this.userData.id}`})}},mounted(){m().get("/user-data").then((e=>{this.userData=e.data})).catch((e=>{console.log(e),this.$router.push({path:"/error"})}))}},w=C,I=(0,l.Z)(w,k,y,!1,null,"1f25e628",null),$=I.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookgrid"},[e.books?e._e():n("fulfilling-square-spinner",{staticClass:"center-msg spinner",attrs:{"animation-duration":1e3,size:100,color:"#235c4d"}}),e.books&&e.books.length>0?n("div",[n("div",{staticClass:"header text-center space-y-6"},[n("h1",{staticClass:"text-3xl font-extrabold sm:text-4xl"},[e._v(" Libros por leer ")]),n("div",{staticClass:"content-center space-x-0 space-y-3 sm:space-x-4 sm:space-y-0"},[n("button",{staticClass:"bg-transparent hover:bg-blue-500  font-semibold py-2 px-4 border hover:border-transparent rounded",on:{click:function(t){return e.orderByRating()}}},[e._v(" Ordena por nota ")]),n("button",{staticClass:"bg-transparent hover:bg-blue-500  font-semibold py-2 px-4 border hover:border-transparent rounded",on:{click:function(t){return e.minimunInfo()}}},[e._v(" Info. "+e._s(e.minInfo?"Completa":"Reducida")+" ")])])]),n("br"),n("main",{staticClass:"grid grid-rows-1 justify-center"},e._l(e.books,(function(t,o){return n("div",{key:o,staticClass:"book flex"},[e.minInfo?e._e():n("div",{staticClass:"flex-shrink-0"},[n("img",{staticClass:"rounded-lg shadow-md",attrs:{src:t.image,alt:"Portada del libro"}})]),n("div",{staticClass:"{mt-4: !minInfo, mt-0: !minInfo, ml-6: !minInfo}"},[n("a",{staticClass:"block mt-1 text-lg leading-tight font-medium text-gray-900"},[e._v(e._s(t.title)+" de "+e._s(t.author))]),e.minInfo?e._e():n("br"),e.minInfo?e._e():n("div",{staticClass:"uppercase tracking-wide text-sm text-indigo-600 font-normal"},[e._v(" Páginas: "+e._s(t.pages)+" ")]),e.minInfo?e._e():n("div",{staticClass:"uppercase tracking-wide text-sm text-indigo-600 font-normal"},[e._v(" Nota media en GoodReads: "+e._s(t.rating)+" ")]),n("div",[n("a",{staticClass:"mt-2 text-gray-600 underline",attrs:{target:"_blank",href:e.chooseLinkForPaper(t.libraryLinks)}},[e._v("Biblioteca")]),n("span",[e._v(" / ")]),n("a",{staticClass:"mt-2 text-gray-600 underline",attrs:{target:"_blank",href:t.libraryLinks.ebiblio}},[e._v("eBiblio")])])])])})),0)]):e._e(),e.books&&0===e.books.length?n("div",{staticClass:"center-msg"},[n("h2",[e._v("No tienes ningún libro marcado como pendiende de leer 😱")])]):e._e()],1)},M=[],O={name:"Books",components:{FulfillingSquareSpinner:b.dF},data(){return{minInfo:!1,userId:this.$route.params.id,books:void 0,isMobile:!1}},mounted(){if(m().get(`/to-read?userid=${this.userId}`).then((e=>{this.books=e.data})).catch((e=>{console.log(e),this.$router.push({path:"/error"})})),"maxTouchPoints"in navigator)this.isMobile=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)this.isMobile=navigator.msMaxTouchPoints>0;else{var e=window.matchMedia&&matchMedia("(pointer:coarse)");if(e&&"(pointer:coarse)"===e.media)this.isMobile=!!e.matches;else if("orientation"in window)this.isMobile=!0;else{var t=navigator.userAgent;this.isMobile=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}}},methods:{chooseLinkForPaper(e){return console.log(JSON.stringify(e)),this.isMobile?e.paperMobile:e.paperDesktop},sortByRatingFn(e,t){const n=e.rating,o=t.rating;return n>o?-1:n<o?1:0},orderByRating(){this.books.sort(this.sortByRatingFn)},minimunInfo(){this.minInfo=!this.minInfo}}},B=O,E=(0,l.Z)(B,P,M,!1,null,"6e475d12",null),F=E.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"error"},[n("h1",{staticClass:"text-2xl"},[e._v(" Ups 😥 estoy sufriendo un error ")]),n("h1",{staticClass:"text-2xl"},[e._v(" Prueba a volver a empezar. ")]),n("br"),n("button",{staticClass:"bg-transparent font-bold py-2 px-4 border-2 rounded",on:{click:function(t){return e.goToInit()}}},[e._v(" Volver al inicio ")])])},T=[],Z={name:"Error",methods:{goToInit(){window.location.href="/good-mad-library/"}}},N=Z,R=(0,l.Z)(N,q,T,!1,null,"906d0296",null),S=R.exports,j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"notfound"},[n("h1",{staticClass:"text-2xl"},[e._v(" Parece que la página que buscas no existe 😥 ")])])}],A={name:"NotFound"},z=A,L=(0,l.Z)(z,j,D,!1,null,"a6ccc5f4",null),G=L.exports;const U=[{path:"",component:x},{path:"/callback",component:$},{path:"/error",component:S},{path:"/books/:id",component:F,props:!0},{path:"*",component:G}];var W=n(8345);o.Z.use(W.Z);const J=new W.Z({routes:U});m().defaults.baseURL="https://clean-fly-headscarf.cyclic.app/",o.Z.config.productionTip=!1,new o.Z({render:e=>e(u),router:J}).$mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,i){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var a=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,s=o[0],a=o[1],l=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var u=l(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkgoodmadlib_cover"]=self["webpackChunkgoodmadlib_cover"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9380)}));o=n.O(o)})();
//# sourceMappingURL=app.7e9a8455.js.map